<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>
  body {
    padding: 100px;
    width: 1000px;
    margin: auto;
    text-align: left;
    font-weight: 300;
    font-family: 'Open Sans', sans-serif;
    color: #121212;
  }
  h1, h2, h3, h4 {
    font-family: 'Source Sans Pro', sans-serif;
  }
</style>
<title>CS 184 Mesh Editor</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">
</head>


<body>

<h1 align="middle">CS 184: Computer Graphics and Imaging, Spring 2022</h1>
<h1 align="middle">Project 4: Cloth Simulator</h1>
<h2 align="middle">Alan Hernandez and Medhaav Chandra Mahesh, p4-clothsim-sp22-tpm, https://cal-cs184-student.github.io/sp22-project-webpages-al2699/proj4/index.html</h2>

<br><br>

    <div>

        <h2 align="middle">Overview</h2>
        <p>Give a high-level overview of what you implemented in this project. Think about what you've built as a whole. Share your thoughts on what interesting things you've learned from completing the project.</p>

        <h2 align="middle">Part I: Masses and springs</h2>
        <strong>
            Take some screenshots of scene/pinned2.json from a viewing angle where you can clearly see the cloth wireframe to show the structure of your point masses and springs.
        </strong>
        <div align="center">
            <table style="width=100%">
                <tr>
                    <td align="middle">
                        <img src="images/part1allconstraints.png" width="480px" />
                        <figcaption align="middle">scene/pinned2.json from a clear viewing angle </figcaption>
                    </td>
                </tr>
            </table>
        </div>


        <strong>
            Show us what the wireframe looks like (1) without any shearing constraints, (2) with only shearing constraints, and (3) with all constraints.
        </strong>

        <div>
            <table style="width=100%">
                <tr>
                    <td align="left">
                        <img src="images/part1noshearing.png" width="480px" />
                        <figcaption align="middle">(1) Wireframe without shearing constraints </figcaption>
                    </td>
                    <td align="right">
                        <img src="images/part1onlyshearingconstraints.png" width="480px" />
                        <figcaption align="middle">(2) Wireframe with only shearing constraints</figcaption>
                    </td>
                </tr>
                <tr>
                    <td align="middle">
                        <img src="images/part1allconstraints.png" width="480px" />
                        <figcaption align="middle">(3) Wireframe with all constraints</figcaption>
                    </td>
                </tr>
            </table>
        </div>

        <h2 align="middle">Part II: Masses and springs</h2>
        <strong>
            Experiment with some the parameters in the simulation. To do so, pause the simulation at the start with P, modify the values of interest, and then resume by pressing P again. You can also restart the simulation at any time from the cloth's starting position by pressing R.
        </strong>


        <ul>
            <li>
                <strong>Describe the effects of changing the spring constant ks; how does the cloth behave from start to rest with a very low ks? And for high ks?</strong>
                <p>For high k_s, there just seems to be more general stiffness of the cloth as it begins to rest after falling. The opposite occurs for low k_s: the cloth seems to be very loose and move quite gracefully as it falls. Also low k_s gives a very droopy look to the cloth after it’s reached it’s resting position. Also less creases.</p>
                <img src="images/part2highks.png" width="480px" />
                <figcaption align="left">High k_{s} value</figcaption>
                <img src="images/part2lowks.png" width="480px" />
                <figcaption align="left">Low k_{s} value</figcaption>
            </li>
            <li>
                <strong>What about for density?</strong>
                <p>Density just seems to change the weight of the cloth. As density increases, the cloth looks to pull stronger and stronger at the two pinned points in it. As density decreases, the cloth stays further up at rest meaning it tugs less at the pinned point masses.</p>
                <img src="images/part2highdensity.png" width="480px" />
                <figcaption align="left">High density value</figcaption>
                <img src="images/part2lowdensity.png" width="480px" />
                <figcaption align="left">Low density value</figcaption>
            </li>
            <li>
                <strong>What about for damping?</strong>
                <p>Damping seems to control the speed at which the cloth falls and comes to a steady state (specifically just hanging still). Low damping also causes erratic behavior with the cloth. Presumably because it causes the verlet integration error to amplify?</p>
                <img src="images/part2highdamping.png" width="480px" />
                <figcaption align="left">High density value</figcaption>
                <img src="images/part2lowdamping.png" width="480px" />
                <figcaption align="left">Low density value</figcaption>
            </li>
        </ul>

        <strong>Show us a screenshot of your shaded cloth from scene/pinned4.json in its final resting state! If you choose to use different parameters than the default ones, please list them.</strong>
        <table align="middle">
            <tr>
                <td>
                    <img src="images/part2shadedrest.png" width="480px" />
                    <figcaption align="middle">High density value</figcaption>
                </td>
            </tr>
        </table>

        <h2 align="middle">Part III: Handling collisions with other objects</h2>
        <strong>
            Show us screenshots of your shaded cloth from scene/sphere.json in its final resting state on the sphere using the default ks = 5000 as well as with ks = 500 and ks = 50000. Describe the differences in the results.
        </strong>

        <div>
            <table style="width=100%">
                <tr>
                    <td align="left">
                        <img src="images/part3spherek5000.png" width="480px" />
                        <figcaption align="middle">scene/sphere.json with default ks = 5000</figcaption>
                    </td>
                    <td align="right">
                        <img src="images/part3spherek500.png" width="480px" />
                        <figcaption align="middle">scene/sphere.json with ks = 500</figcaption>
                    </td>
                </tr>
                <tr>
                    <td align="middle">
                        <img src="images/part3spherek50000.png" width="480px" />
                        <figcaption align="middle">scene/sphere.json with ks = 50000</figcaption>
                    </td>
                </tr>
            </table>
        </div>

        <strong>
            Show us a screenshot of your shaded cloth lying peacefully at rest on the plane. If you haven't by now, feel free to express your colorful creativity with the cloth! (You will need to complete the shaders portion first to show custom colors.)
        </strong>

        <div>
            <table style="width=100%">
                <tr>
                    <td align="left">
                        <img src="images/part3shadedatrest.png" width="480px" />
                        <figcaption align="middle">scene/sphere.json shaded at rest</figcaption>
                    </td>
                </tr>
            </table>
        </div>

        <h2 align="middle">Part IV: Handling self-collisions</h2>
        <strong>
            Show us at least 3 screenshots that document how your cloth falls and folds on itself, starting with an early, initial self-collision and ending with the cloth at a more restful state (even if it is still slightly bouncy on the ground).
        </strong>

        <div>
            <table style="width=100%">
                <tr>
                    <td align="left">
                        <img src="images/part4partiallycollapsed.png" width="480px" />
                        <figcaption align="middle">cloth beginning to fall</figcaption>
                    </td>
                    <td align="right">
                        <img src="images/part4semicollapsed.png" width="480px" />
                        <figcaption align="middle">cloth with some early self-collisions</figcaption>
                    </td>
                </tr>
                <tr>
                    <td align="middle">
                        <img src="images/part4fullycollapsed.png" width="480px" />
                        <figcaption align="middle">cloth at a more restful state</figcaption>
                    </td>
                </tr>
            </table>
        </div>
        <strong>
            Vary the density as well as ks and describe with words and screenshots how they affect the behavior of the cloth as it falls on itself.
        </strong>
        <p>
            Varying the cloth via ks and density seem to have inverse effects. Increasing the density of the cloth leads to the cloth wrinkling a lot less on it’s way down and just falling straight down in a fast manner. This same pattern occurs when the ks value of the cloth is decreased. Now decreasing density of the cloth or also increasing the ks value of the cloth leads to the cloth bending and folding on itself a lot more as it falls down.
        </p>

        <div>
            <table style="width=100%">
                <tr>
                    <td align="left">
                        <img src="images/part4highdensity.png" width="480px" />
                        <figcaption align="middle">cloth with high density</figcaption>
                    </td>
                    <td align="right">
                        <img src="images/part4lowdensity.png" width="480px" />
                        <figcaption align="middle">cloth with low density</figcaption>
                    </td>
                </tr>
                <tr>
                    <td align="middle">
                        <img src="images/part4highks.png" width="480px" />
                        <figcaption align="middle">cloth with high ks</figcaption>
                    </td>
                    <td align="middle">
                        <img src="images/part4lowks.png" width="480px" />
                        <figcaption align="middle">cloth with low ks</figcaption>
                    </td>
                </tr>
            </table>
        </div>

        <h2 align="middle">Part V: Shaders</h2>
        <strong>
            Explain in your own words what is a shader program and how vertex and fragment shaders work together to create lighting and material effects.
        </strong>

        <p>
            A shader program is a program which is highly parallelizable and can compute the shading of light on a given object/scene. Shaders are generally broken into two pieces: vertex and fragment shaders. Vertex shaders shade vertices and then interpolate between vertices to get shader values between vertices. Fragments simply take in the interpolated values created by the vertex shaders program and finds the color to fill in at a specific pixel in screen space.

        </p>

        <strong>
            Explain the Blinn-Phong shading model in your own words. Show a screenshot of your Blinn-Phong shader outputting only the ambient component, a screen shot only outputting the diffuse component, a screen shot only outputting the specular component, and one using the entire Blinn-Phong model.
        </strong>

        <p>
            Blinn-Phong shading uses three different components of light: diffuse, ambient, and specular. Diffuse lighting is lighting scattered uniformly in all directions
            and creates a matte look, specular shading is lighting where intensity increases as you get closer to the reflection direction and gets the glossy bits of the object, and ambient shading is shading that depnds
            on nothing and uses a constant illumination (meaning that the 3d object looks 2d when looked at from any angle).
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/phong_ambient.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Sphere - only ambient lighting</figcaption>
                        </td>
                    </tr>
                </table>
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/phong_diffuse.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Sphere - only diffuse lighting</figcaption>
                        </td>
                    </tr>
                </table>
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/phong_specular.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Sphere - only specular lighting</figcaption>
                        </td>
                    </tr>
                </table>
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/phong.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Sphere - total phong lighting</figcaption>
                        </td>
                    </tr>
                </table>
            </div>

        </p>

        <strong>
            Show a screenshot of your texture mapping shader using your own custom texture by modifying the textures in /textures/.
        </strong>

        <p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/texture.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Jingbah Sphere</figcaption>
                        </td>
                    </tr>
                </table>
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/texture_cloth.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Jingbah Cloth on Jingbah Sphere</figcaption>
                        </td>
                    </tr>
                </table>
            </div>

        </p>

        <strong>
            Show a screenshot of bump mapping on the cloth and on the sphere. Show a screenshot of displacement mapping on the sphere. Use the same texture for both renders. You can either provide your own texture or use one of the ones in the textures directory, BUT choose one that's not the default texture_2.png. Compare the two approaches and resulting renders in your own words. Compare how your the two shaders react to the sphere by changing the sphere mesh's coarseness by using -o 16 -a 16 and then -o 128 -a 128.
        </strong>

        <p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/bump.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Cloth on Sphere - Bump Shading - normal = 100, height = 0.1</figcaption>
                        </td>
                    </tr>
                </table>
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/bump_sphere.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Sphere -  Bump Shading - normal = 100, height = 0.1</figcaption>
                        </td>
                    </tr>
                </table>
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/diffuse_0.05.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Cloth on Sphere - Displacement Shading - normal = 100, height = 0.05</figcaption>
                        </td>
                    </tr>
                </table>
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/displacement_sphere.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Sphere - Displacement Shading - normal = 100, height = 0.05</figcaption>
                        </td>
                    </tr>
                </table>
            </div>

            The differences seems to be that bump mapping creates a clear image showing the different heights of the image (eg, reflecting from the surface around the edges of a height change)
            while the image produced by displacement mapping is more messy and looks very distorted. Displacement shading works almost the same way as bump shading, but you add
            Increasing the coarseness of the objects, increases the distortion of the cloth and the sphere when using displacement shading while having little effect on bump shading.

        </p>
        <strong>
            Show a screenshot of your mirror shader on the cloth and on the sphere.
        </strong>
        <p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/mirror_sphere.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Sphere</figcaption>
                        </td>
                    </tr>
                </table>
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/mirror_cloth.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Cloth on Sphere</figcaption>
                        </td>
                    </tr>
                </table>
            </div>

        </p>

        <strong>
            Explain what you did in your custom shader, if you made one.
        </strong>

        <p>
            For the custom shader, I multiplied the uv coordinate of each vector by the number of times I want it to appear (in this case by 3) and used the fractional part
            of this multiplication in a box function I found online to create a set of squares. I then applied blinn-phong shading, but reflected the color outputed by the diffuse equation on the normal to get a multicolor image within each square.

        </p>

        <p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/custom_sphere.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Sphere</figcaption>
                        </td>
                    </tr>
                </table>
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/custom_cloth.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Cloth on Sphere</figcaption>
                        </td>
                    </tr>
                </table>
            </div>

        </p>

        <h2 align="middle">Part VI: Extra Credit</h2>
        <strong>
            If you implemented any additional technical features for the cloth simulation, clearly describe what you did and provide screenshots that illustrate your work. If it is an improvement compared to something already existing on the cloth simulation, compare and contrast them both in words and in images.
        </strong>

        <p>
            We implemented a wind feature that is a button that adds a constant wind factor to the cloth if turned on. We implemented it by adding a wind Vector3D variable in clothSimulator.h and inputting this constant wind vector
            into the simulate() function of cloth.cpp (similar to gravity). We also added an enable wind clothParameter to cloth.h and added the necessary functions in main.cpp and clothSimulator.cpp
            for it to work. If enable wind is turned on, for each point mass on the cloth, we used a wind force equation that we found <a href="here">https://www.alanshawn.com/tech/2019/08/17/pyopengl-6.html</a>. Also added a "wind" boolean key to the json files where all of them are set to false initially (meaning no wind at the start).

            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/wind_cloth_sphere.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: Wind pulling cloth from sphere</figcaption>
                        </td>
                    </tr>
                </table>
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/mirror_wind_pinned.PNG" width="480px" />
                            <figcaption align="middle">Results Caption: 2 pinned cloth flying in the wind</figcaption>
                        </td>
                    </tr>
                </table>
            </div>
        </p>

    </div></body>
</table>
</html>
